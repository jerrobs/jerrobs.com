<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width" name=viewport><link href=/assets/icons/favicon.svg rel=icon type=image/svg+xml><link href=https://www.jerrobs.com/issues/pathices/pth-003/ rel=canonical><meta content="Astro v2.5.7" name=generator><title>Making it precise</title><meta content="Making it precise" name=title><meta content="Rounding errors due to storing values as floating point values can easily get out of hand, particular care is required if you can only safely assume 16 bit precision.
" name=description><meta content="Dirk Rathje" name=author><script src=/toggle-theme.js defer=defer></script><link href=/manifest.webmanifest rel=manifest><link href=/assets/about-12e1532a.css rel=stylesheet /><script src=/_astro/hoisted.88db4f2a.js type=module></script></head><body><div class=layout><div class=layout__header><header class=astro-3EF6KSR2><a class="astro-3EF6KSR2 skip-to-content" href=#main-content>Skip to content</a><div class="astro-3EF6KSR2 nav-container"><a class="astro-3EF6KSR2 logo" href=/ ><object alt="[logo] J. Err. Obs" class="astro-3EF6KSR2 jerrobs" data=/assets/jerrobs.svg height=28 type=image/svg+xml width=138></object></a><nav class=astro-3EF6KSR2 id=nav-menu><ul class="astro-3EF6KSR2 body-md" id=menu-items><li class=astro-3EF6KSR2><a class=astro-3EF6KSR2 href=/issues>Issues</a></li><li class=astro-3EF6KSR2><a class=astro-3EF6KSR2 href=/references>References</a></li><li class=astro-3EF6KSR2><a class=astro-3EF6KSR2 href=/about>About</a></li><li class=astro-3EF6KSR2><button aria-label=auto aria-live=polite class="astro-3EF6KSR2 focus-outline" id=theme-btn title="Toggles light & dark"><svg class=astro-3EF6KSR2 id=moon-svg xmlns=http://www.w3.org/2000/svg><path class=astro-3EF6KSR2 d="M21.7519 15.0019C20.597 15.4839 19.3296 15.75 18 15.75C12.6152 15.75 8.25 11.3848 8.25 5.99999C8.25 4.67039 8.51614 3.40296 8.99806 2.24805C5.47566 3.71785 3 7.19481 3 11.25C3 16.6348 7.36522 21 12.75 21C16.8052 21 20.2821 18.5243 21.7519 15.0019Z" stroke=#0F172A stroke-linecap=round stroke-linejoin=round stroke-width=1.5 xmlns=http://www.w3.org/2000/svg></path></svg> <svg class=astro-3EF6KSR2 id=sun-svg xmlns=http://www.w3.org/2000/svg><path class=astro-3EF6KSR2 d="M12 3V5.25M18.364 5.63604L16.773 7.22703M21 12H18.75M18.364 18.364L16.773 16.773M12 18.75V21M7.22703 16.773L5.63604 18.364M5.25 12H3M7.22703 7.22703L5.63604 5.63604M15.75 12C15.75 14.0711 14.0711 15.75 12 15.75C9.92893 15.75 8.25 14.0711 8.25 12C8.25 9.92893 9.92893 8.25 12 8.25C14.0711 8.25 15.75 9.92893 15.75 12Z" stroke=#0F172A stroke-linecap=round stroke-linejoin=round stroke-width=1.5 xmlns=http://www.w3.org/2000/svg></path></svg></button></li></ul></nav></div></header><nav class="astro-ILHXCYM7 breadcrumb" aria-label=breadcrumb><p class=astro-ILHXCYM7></p><ul class=astro-ILHXCYM7><li class="astro-ILHXCYM7 body-sm"><a class=astro-ILHXCYM7 href=/ >Home</a></li><li class="astro-ILHXCYM7 body-sm"><a class=astro-ILHXCYM7 href=/issues>issues</a></li><li class="astro-ILHXCYM7 body-sm"><a class=astro-ILHXCYM7 href=/issues/pathices>pathices</a></li><li class="astro-ILHXCYM7 body-sm"><a class=astro-ILHXCYM7 href=/issues/pathices/pth-003>pth-003</a></li></ul></nav></div><div class=layout__main><article class=article role=article><header class=article-header><h1 class="body-xl italic uppercase article-title bold">Making it precise</h1><p class="body-xl italic uppercase article-subtitle">by outsmarting floating&nbsp; point limitations</p><p class="body-md article-abstract bold mb-1">Rounding errors due to storing values as floating point values can easily get out of hand, particular care is required if you can only safely assume 16 bit precision.</p></header><div class=article-body><p class=md>If it is true that the devil is in the details, then getting numerical simulations to work in web browsers on different devices is a statistical endeavor.</p><p class=md>The root of the evil are floating point numbers, which are not a bad thing per se, but a neat trick to store numbers of very different magnitude and reasonably acceptable precision in a memory-efficient way. They solve the problem of representing an infinite number of numbers with limited memory - be it 16 bit, 32 bit or 64 (in the case of WebGL even 24 bit on some devices).</p><div class=level1><p class=md>To store any number <code>x</code> in computer memory you need a binary representation of that number:</p><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#abb2bf>x </span><span style=color:#c678dd>=</span><span style=color:#abb2bf> aₙ aₙ₋₁ … a₀.a₋₁ a₋₂…a₋ₘ</span></span>
<span class=line></span></code></pre><p class=md>where <code>aₙ aₙ₋₁ … a₀</code> represents the integer part and <code>a₋₁ a₋₂…a₋ₘ</code> the fractional part of <code>x</code>.</p><p class=md>We have to decide how many bits to use for its integer part, and how many for its fractional part.</p></div><p class=md>When using WebGL for numerical simulations, floating point numbers cause trouble in two places:</p><ol class=md><li class=md>While smartphones GPUs know to read floating points and to do arithmetics with them, they cannot write them back to memory. Therefore, we need to convert them from and to some integer based representation.</li><li class=md>While desktop GPUs can write floating points back to memory, the precision of</li></ol><section class=md><h2 class=md id=ieee-754>IEEE 754</h2><p class=md>For nearly all hardware and programming languages, floating-point numbers are stored in the same binary format defined on the 70 pages of the <em>IEEE Standard for Floating-Point Arithmetic (IEEE 754)</em> (<bib-ref cite-key=ieee__2019__754>,<bib-ref cite-key=ieee__2019__754>)</bib-ref></bib-ref></p><p class=md>The usual formats are 32 or 64 bits in total length:</p><p class=md>The first version of the standard was published in 1985 by the Institute of Electrical and Electronics Engineers (IEEE). The first revision was published in 2008, the third and current (as of 2020) revision was published in 2019.</p><p class=md>The IEEE754 standards, representing double precision numbers with 64 bits (a.k.a double, or float64) and single precision numbers with 32 bits (a.k.a float32).</p><p class=md>defines how almost all modern programming languages, GPUs and CPUs handle floating-point numbers.</p></section><section class=md><h2 class=md id=rounding-errors-tragedies>Rounding errors tragedies</h2><ul class=md><li class=md><p class=md>On February 25, 1991, a poor implementation fo floating point artithmetics contributed to the death of 28 soldiers from the U.S. Army’s 14th Quartermaster Detachment in Dhahran, Saudi Arabia. Although the soldiers’ location was protected from Iraqi Scud missiles by a Patriot defence system, floating points rounding errors caused the system’s internal clock to be inaccurate by .34 seconds after being in operation for 100 hours. For a Scud missile travelling at 1600 m/s, a third of a second corresponds to half a kilometre (<bib-ref cite-key=benchoff__2015__improvement>).</bib-ref></p></li><li class=md><p class=md><strong>NOT FLOATIONG POINT, BUT OVERFLOW</strong>. On 4 June 1996 — after ten years of development and cost of 7 billion dollars — the maiden flight of the Ariane 5 launcher ended in a failure. At 39 seconds after liftoff it exploded because a conversion from a 64-bit floating point to a 16-bit integer made the steering computer think the rocket was way off course and made it initiate the self-destruct mechanism built into the rocket — destroying the rocket and cargo valued at half a billion dollars (<bib-ref cite-key=stadther__1998__high>,<bib-ref cite-key=lions__1999__ariane>,<bib-ref cite-key=cnn__1996__unmanned>).</bib-ref></bib-ref></bib-ref></p></li><li class=md><p class=md>Belotti argues that one reason of the 50 years old programming language COBOL being still used for the majority of financial transacions worldwide is that it has fixed point numbers being build-in (<bib-ref cite-key=bellotti__2018__cobol>)</bib-ref></p></li></ul></section><div class=references><h2 class=md id=references>References</h2><ol class="md ref-list"><li class="md reference" id=ref-adzobu__2014__testing>Adzobu, N. Y. A. (2014). <em>Testing the Andrews Framework of Strategy Formulation and Implementation: Case Study of the University of Cape Coast Digital Library in Ghana</em> .</li><li class="md reference" id=ref-alexander_ishikawa_etal__1977__pattern>Alexander, C., Ishikawa, S., &#x26;#38; Silverstein, M. (1977). <em>A pattern language: towns, buildings, construction</em> . Oxford University Press.</li><li class="md reference" id=ref-allison_kaye__2015__strategic>Allison, M., &#x26;#38; Kaye, J. (2015). <em>Strategic Planning for Nonprofit Organizations</em> . John Wiley &#x26;#38; Sons.</li><li class="md reference" id=ref-bachani__2012__strategy>Bachani, J. (2012). <em>Strategy Making in Nonprofit Organizations</em> .</li><li class="md reference" id=ref-baralou_wolf_etal__2012__erhellend>Baralou, E., Wolf, P., &#x26;#38; Meissner, J. O. O. (2012). <em>Erhellend, exzellent, ignoriert: Luhmann’s Beitrag zur Systemtheorie und seine Nicht-Anschlussfähigkeit an die akademischen ManagementforschungBright, Excellent, Ignored: The Contribution of Luhmann’s System Theory and Its Problem of Non-Connectivity to Academic Management Research</em> . HSR (GESIS Leibniz Institute for the Social Sciences).</li><li class="md reference" id=ref-barbrook-johnson_penn__2022__systems>Barbrook-Johnson, P., &#x26;#38; Penn, A. S. (2022). <em>Systems Mapping: How to build and use causal models of systems</em> . Springer International Publishing.</li><li class="md reference" id=ref-bell_huang__1997__dynamic>Bell, J., &#x26;#38; Huang, Z. (1997). <em>Dynamic goal hierarchies</em> . (L. Cavedon, A. Rao, &#x26;#38; W. Wobcke, Eds.). Springer Berlin Heidelberg.</li><li class="md reference" id=ref-blackwell_phaal_etal__2008__strategy>Blackwell, A., Phaal, R., Eppler, M., &#x26;#38; Crilly, N. (2008). <em>Strategy Roadmaps: New Forms, New Practices</em> .</li><li class="md reference" id=ref-bryson__2018__strategic>Bryson, J. M. (2018). <em>Strategic Planning for Public and Nonprofit Organizations</em> . John Wiley &#x26;#38; Sons.</li><li class="md reference" id=ref-bryson_ackermann_etal__2014__visual>Bryson, J. M., Ackermann, F., &#x26;#38; Eden, C. (2014). <em>Visual Strategy: Strategy Mapping for Public and Nonprofit Organizations</em> . John Wiley &#x26;#38; Sons.</li><li class="md reference" id=ref-bryson_alston__2011__creating>Bryson, J. M., &#x26;#38; Alston, F. K. (2011). <em>Creating Your Strategic Plan</em> . John Wiley &#x26;#38; Sons.</li><li class="md reference" id=ref-caine____need>Caine, J. (n.d.). <em>The Need and Requirements to a Strategy Ontology</em> .</li><li class="md reference" id=ref-caine_vonrosing__2018__introducing>Caine, J., &#x26;#38; Rosing, M. (2018). <em>Introducing the Strategy Lifecycle: Using Ontology and Semiotics to Interlink Strategy Design to Strategy Execution</em> . (K. Liu, K. Nakata, W. Li, &#x26;#38; C. Baranauskas, Eds.). Springer International Publishing.</li><li class="md reference" id=ref-clausewitz__1832__vom>Clausewitz, C. (1832). <em>Vom Kriege</em> . Null Papier.</li><li class="md reference" id=ref-cropanzano_citera_etal__1995__goal>Cropanzano, R., Citera, M., &#x26;#38; Howes, J. (1995). <em>Goal hierarchies and plan revision</em> .</li><li class="md reference" id=ref-dimand_dimand__1994__neumann>Dimand, R. W., &#x26;#38; Dimand, M. A. (1994). <em>Von Neumann and Morgenstern in historical perspective</em> . (C. Schmidt, Ed.).</li><li class="md reference" id=ref-eknow__2015__eknow>eKNOW. (2015). <em>eKNOW 2015: the Seventh International Conference on Information, Process, and Knowledge Management: February 22-27, 2015, Lisbon, Portugal</em> . (D. Malzahn &#x26;#38; C. Granja, Eds.). Curran Associates, Inc.</li><li class="md reference" id=ref-freedman__2013__strategy>Freedman, L. (2013). <em>Strategy: A history.</em> Oxford University Press.</li><li class="md reference" id=ref-gamma_helm_etal__1994__design>Gamma, E., Helm, R., Johnson, R., &#x26;#38; Vlissides, J. (1994). <em>Design patterns: elements of reusable object-oriented software</em> . Addison-Wesley.</li><li class="md reference" id=ref-garrido_faria____design>Garrido, P., &#x26;#38; Faria, N. (n.d.). <em>DESIGN OF A SOCIAL DECISION SUPPORT SYSTEM FOR ORGANIZATIONS</em> .</li><li class="md reference" id=ref-goodier_austin_etal__2010__causal>Goodier, C., Austin, S., Soetanto, R., &#x26;#38; Dainty, A. (2010). <em>Causal mapping and scenario building with multiple organisations</em> .</li><li class="md reference" id=ref-gorog__2013__strategicoriented>Görög, M. (2013). <em>A Strategic-Oriented Implementation of Projects</em> . Project Management Institute.</li><li class="md reference" id=ref-grant__2016__contemporary>Grant, R. M. (2016). <em>Contemporary Strategy Analysis</em> . John Wiley &#x26;#38; Sons.</li><li class="md reference" id=ref-sep-definitions>Gupta, A. (2021). <em>Definitions</em> . (E. N. Zalta, Ed.). Metaphysics Research Lab, Stanford University.</li><li class="md reference" id=ref-hannabarger_hannabarger_etal__2007__balanced>Hannabarger, C., Hannabarger, C., Buchman, R., Buchman, F., &#x26;#38; Economy, P. (2007). <em>Balanced Scorecard Strategy For Dummies</em> . John Wiley &#x26;#38; Sons.</li><li class="md reference" id=ref-hewitt__2018__technology>Hewitt, E. (2018). <em>Technology Strategy Patterns</em> . O’Reilly Media.</li><li class="md reference" id=ref-johnson_scholes_etal__2008__exploring>Johnson, G., Scholes, K., &#x26;#38; Whittington, R. (2008). <em>Exploring Corporate Strategy</em> . Pearson Education.</li><li class="md reference" id=ref-johnson__2013__project>Johnson, W. H. A. (2013). <em>Project Strategy and Strategic Portfolio Management</em> . Business Expert Press.</li><li class="md reference" id=ref-kaplan_norton__2004__strategy>Kaplan, R. S., &#x26;#38; Norton, D. P. (2004). <em>Strategy maps</em> . : Harvard Business Review Press.</li><li class="md reference" id=ref-knuth_plass__1981__breaking>Knuth, D. E., &#x26;#38; Plass, M. F. (1981). <em>Breaking paragraphs into lines</em> .</li><li class="md reference" id=ref-juanluisdalmau-espert_llorens-largo_etal__2015__ontology>Llorens-Largo, F., &#x26;#38; Molina-Carmona, R. (2015). <em>An Ontology for Formalizing and Automating the Strategic Planning Process</em> . Curran Associates, Inc.</li><li class="md reference" id=ref-mintzberg__1978__patterns>Mintzberg, H. (1978). <em>Patterns in Strategy Formation</em> .</li><li class="md reference" id=ref-mintzberg_ahlstrand_etal__1998__strategy>Mintzberg, H., Ahlstrand, B. W., &#x26;#38; Lampel, J. (1998). <em>Strategy safari: a guided tour through the wilds of strategic management</em> . Free Press.</li><li class="md reference" id=ref-mueller-stewens_gillenkirch__2018__strategie>Müller-Stewens, G., &#x26;#38; Gillenkirch, R. (2018). <em>Strategie</em> .</li><li class="md reference" id=ref-vonneumann_morgenstern__1953__theory>Neumann, J., &#x26;#38; Morgenstern, O. (1953). <em>Theory of games and economic behavior</em> . Princeton University Press.</li><li class="md reference" id=ref-olsen__2011__strategic>Olsen, E. (2011). <em>Strategic Planning Kit For Dummies</em> . John Wiley &#x26;#38; Sons.</li><li class="md reference" id=ref-parker__1990__creating>Parker, M. (1990). <em>Creating shared vision</em> . Dialog Intl.</li><li class="md reference" id=ref-porter__1979__what>Porter, M.E. (1979). <em>What is strategy?</em></li><li class="md reference" id=ref-porter__1985__competitive>Porter, Michael E. (1985). <em>Competitive advantage: creating and sustaining superior performance</em> . Free Press ; Collier Macmillan.</li><li class="md reference" id=ref-porter__1989__how>Porter, Michael E. (1989). <em>How competitive forces shape strategy</em> . (D. Asch &#x26;#38; C. Bowman, Eds.). Macmillan Education UK.</li><li class="md reference" id=ref-porter__2008__five>Porter, Michael E. (2008). <em>The Five Competitive Forces That Shape Strategy</em> .</li><li class="md reference" id=ref-rainey__2014__understanding>Rainey, H. G. (2014). <em>Understanding and Managing Public Organizations</em> . John Wiley &#x26;#38; Sons.</li><li class="md reference" id=ref-ramirez_churchhouse_etal__2017__using>Ramirez, R., Churchhouse, S., Palermo, A., &#x26;#38; Hoffmann, J. (2017). <em>Using scenario planning to reshape strategy</em> .</li><li class="md reference" id=ref-review__2018__hbr>Review, Harvard Business (Ed.). (2018). <em>HBR Guide to Thinking Strategically (HBR Guide Series)</em> . Harvard Business Press.</li><li class="md reference" id=ref-review__2020__hbr>Review, Harvard Business (Ed.). (2020). <em>HBR Guide to Managing Strategic Initiatives</em> . Harvard Business Press.</li><li class="md reference" id=ref-review_porter_etal__2011__hbr>Review, H.B., Porter, M. E., Kim, W. C., &#x26;#38; Mauborgne, R. A. (2011). <em>HBR’s 10 Must Reads on Strategy (including featured article “What Is Strategy?” by Michael E. Porter)</em> . Harvard Business Press.</li><li class="md reference" id=ref-ricard__2013__roadmapping>Ricard, L. M. (2013). <em>Roadmapping and Strategy in Science, Technology and Innovation: Why connectivity matters</em> . Technical University of Denmark.</li><li class="md reference" id=ref-roberts__2012__strategic>Roberts, P. (2012). <em>Strategic Project Management</em> . Kogan Page Publishers.</li><li class="md reference" id=ref-roper_cunningham_etal__2011__forecasting>Roper, A. T., Cunningham, S. W., Porter, A. L., Mason, T. W., Rossini, F. A., &#x26;#38; Banks, J. (2011). <em>Forecasting and Management of Technology</em> .</li><li class="md reference" id=ref-ross__2021__game>Ross, D. (2021). <em>Game theory</em> . (E. N. Zalta, Ed.). Metaphysics Research Lab, Stanford University.</li><li class="md reference" id=ref-scavarda_bouzdine-chameeva_etal__2006__methodology>Scavarda, A. J., Bouzdine-Chameeva, T., Goldstein, S. M., Hays, J. M., &#x26;#38; Hill, A. V. (2006). <em>A Methodology for Constructing Collective Causal Maps*</em> .</li><li class="md reference" id=ref-schmidt__2002__game>Schmidt, C. (Ed.). (2002). <em>Game theory and economic analysis</em> . Routledge.</li><li class="md reference" id=ref-schmidt__2009__strategic>Schmidt, T. (2009). <em>Strategic Project Management Made Simple</em> . John Wiley &#x26;#38; Sons.</li><li class="md reference" id=ref-simonse_buijs_etal__2012__visual>Simonse, L., Buijs, J., &#x26;#38; Hultink, E. (2012). <em>Visual portrays of roadmaps</em> .</li><li class="md reference" id=ref-wikiepedia__2023__strategy><em>Strategy</em> . (2023).</li><li class="md reference" id=ref-suntzu__2004__kunst>Sun Tzu, W. (2004). <em>Die Kunst des Krieges</em> .</li><li class="md reference" id=ref-suntzu__2008__sun>Sun Tzu, W. (2008). <em>Sun Tzu’s the Art of War. Bilingual edition with complete Chinese and English text.</em> Tuttle Publishing.</li><li class="md reference" id=ref-ronalds_vatananan_nathasitgerdsri__2012__current><em>The current state of technology roadmapping (TRM) research and practice</em> . (2012).</li><li class="md reference" id=ref-vinayavekhin_phaal__2019__synchronization>Vinayavekhin, S., &#x26;#38; Phaal, R. (2019). <em>Synchronization in Strategic Planning: A Roadmapping Framework</em> .</li><li class="md reference" id=ref-virine_trumper__2019__project>Virine, L., &#x26;#38; Trumper, M. (2019). <em>Project Decisions, 2nd Edition</em> . Berrett-Koehler Publishers.</li><li class="md reference" id=ref-wilkinson_kupers__2013__living>Wilkinson, A., &#x26;#38; Kupers, R. (2013). <em>Living in the Futures</em> .</li><li class="md reference" id=ref-yakan_rashid__2016__strategic>Yakan, A. C., &#x26;#38; Rashid, A. S. K. (2016). <em>Strategic Business Ontology Model</em> .</li></ol></div></div><footer class=article-footer><ul class="bib-list small"></ul></footer></article></div><div class=layout__footer><footer class="astro-SZ7XMLTE footer-wrapper"><p class="astro-SZ7XMLTE copyright-wrapper"><span class=astro-SZ7XMLTE>&#169; 2023</span> <span class="astro-SZ7XMLTE separator">&nbsp;|&nbsp;</span> <span class=astro-SZ7XMLTE>All rights reserved.</span></p></footer></div></div></body></html>